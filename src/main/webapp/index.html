<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Title</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
    integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
    crossorigin=""/>
    <style type="text/css">
        li{
            
        }
        #list{
            width:35%;
            float: left;
            padding: 10px;
            margin:5px;
        }
        #list a{
            display: block;
            width:15em;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            text-decoration-line: none;
        }
        #list a:hover{
            overflow: visible;
            white-space: pre-wrap;
            color:red;
            cursor:pointer;
        }
        #square{
            border: 1px solid #000;
            display: none;
        }
        .map{
            height:500px;
        }
    </style>
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.0/jquery.min.js">
    </script>
    
    
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
    integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
    crossorigin=""></script>
    
</head>
<body>
    <div>
        <div></div>
        <div id="list">
            <ul>
                
            </ul>
            <!-- <dl>
                <dt>Name</dt>
                <dd><ul>
                    <li>1</li>
                    <li>2</li>
                </ul></dd>
                
            </dl> -->
        </div>
        <!-- <CANVAS id="square" width="200" height="200">Your browser does not support the HTML5 canvas tag.</CANVAS> -->
        <div id="map" class="map"></div>
    </div>
    <script type="text/javascript">
        var mymap = L.map('map').setView([40.72,-74.2],6);
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'
        }).addTo(mymap);
        
        var singleOverlay=L.imageOverlay();
        var group=L.layerGroup();
        function setOverlay(imageUrl,imageBounds){
            //singleOverlay.setUrl(imageUrl).setBounds(imageBounds).addTo(mymap);
            var over=L.imageOverlay(imageUrl,imageBounds);
            group.clearLayers().addLayer(over).addTo(mymap);
            mymap.fitBounds(imageBounds);
        }
    </script>
    <script type="text/javascript">

        var testfiles=["KFWD_SDUS64_NCZGRK_201208150217",
                    "SATE_L2_F2G_VISSR_MWB_LBT_SEC_LCN-IR2-20170527-0100.AWX",
                    "KEWX_SDUS54_N0VEWX_201707270600"]
        getFileList();
        function init(files){
            var $ul = $('#list>ul');
            for(var i=0;i<files.length;i++){
                $ul.append("<li><a>"+files[i]+"</a></li>")
            }
            $('#list a').each(function(){
                $(this).click(function(){
                    getData($(this).html());
                })
            });
        }
        
        function getFileList(){
            $.ajax({
                    url:'/radar/rest/r/files/list',
                    type:"GET",
                    // async:false,
                    success:function(result){
                        var json=JSON.parse(result);

                        init(json);
                    }
                });
        }
        function getData(file){
            var json;
                $.ajax({
                    url:'/radar/rest/r/files/'+file,
                    type:"GET",
                    // async:false,
                    success:function(result){
                        json=JSON.parse(result)
                        var hf=json.headfile;
                        var bounds=hf.bounds;
                        var img=json.imgUrl;
                        setOverlay(img,bounds);
                        // var c;
                        // switch(type){
                            // case 1:
                                // c=createGridImage_Satellite(array,array[0].length,array.length);
                                // break;
                            // case 2:
                                // c=createGridImage_Radar(array,array[0].length,array.length);
                                // break;
                            // case 3:
                                // c=createRadialImage(array,data.azimuth,data.gNum);
                                // break;
                        // }
                        // console.log("getData:"+c.width);
                        // setStyle(c);

                    }
                });
        }
        

    </script>
    
</body>
</html>